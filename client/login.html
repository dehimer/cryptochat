<html>
	<head>
	</head>
	<body>
		<div id="loginform" style="width:300px;">
			Login:
			<input class="login" type="text" name="login" style="width:100%;" />
			Password:
			<input class="pasw" type="password" name="pasw" style="width:100%;"/>
			<div class="accept" style="width:100%;heigth:30px;cursor:pointer;background-color:#584;color:white;">
				Accept
			</div>
		</div>
		<!-- script src="static/lib/jquery.js"></script -->
	    <script type="text/javascript" defer>


	    	$('#loginform').children('.accept').bind('click', function () {

	    		var login = $(this).siblings('.login').val()
	    			pasw = $(this).siblings('.pasw').val();

	    		// alert(login+':'+pasw);

			    if(localStorage['userdev']=='undefined' || localStorage['userdev'] == undefined)
			    {
			        localStorage['userdev'] = (new Date()).getTime();
			    }

			    var props = {
			    	login:login,
			    	password: pasw,
			        userinfo: {},
			        userdev: localStorage['userdev']
			    };

			    //параметры экрана
			    {
			        props.userinfo.screen = {}
			        for(var prop in screen) {
			            if (navigator[prop] instanceof Object || screen[prop]==='') continue
			            // document.writeln(prop+": "+screen[prop])
			            props.userinfo.screen[prop] = screen[prop];
			        }
			    }

			    //плагины
			    {
			        props.userinfo.plugins = [];

			        var plugins_len = navigator.plugins.length;

			        for(var i = 0; i < plugins_len; i++) {
			            props.userinfo.plugins.push(navigator.plugins[i].name);
			        };
			    }



			    $.ajax({
			        type: 'get',
			        url: 'verifymyloginpassword',
			        data: props,
			        success: function (data) {
			        	if(data == 'error')
			        	{
			        		// $('#loginform').css('box-shadow', '0px 0px 10px #f90');
			        		var bg = $('#loginform').children('.accept').css('background-color');
			        		$('#loginform').children('.accept').text('Error');
			        		$('#loginform').children('.accept').css('background-color', '#f90');
			        		setTimeout(function () {
			        			$('#loginform').children('.accept').text('Accept');
			        			// $('#loginform').css('box-shadow', 'none');
			        			$('#loginform').children('.accept').css('background-color', bg);
			        		}, 1000);
			        	}
			        	else
			        	{
			        		alert(data)
			        		$('body').html(data);
			        		var userkey = $('body').children('.userkey').text();
			        		var encrkey = $('body').children('.encrkey').text();
			        		localStorage['userkey'] = userkey;
			        		$('body').children('.userkey').remove();
			        		localStorage['encrkey'] = userkey;
			        		$('body').children('.encrkey').remove();
			            	// document.write(data);
			        	}
			        },
			        timeout: 3600000
			    });
	    	});
		</script>

	</body>
</html>